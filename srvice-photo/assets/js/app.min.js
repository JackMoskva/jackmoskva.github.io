
"use strict";var MapYandex=void 0;var currentWidth=$(window).width();$(window).resize(function(){currentWidth=$(window).width();});$(function(){'use strict';var causel1=function causel1(){$('.slider1').owlCarousel({loop:false,lazyLoad:true,margin:30,nav:true,responsive:{0:{items:1},600:{items:3},1000:{items:4}}});};var causel2=function causel2(){$('.slider2').owlCarousel({loop:false,lazyLoad:true,margin:30,nav:true,responsive:{0:{items:1},600:{items:3},1000:{items:5}}});};var causel4=function causel4(){$('.slider4').owlCarousel({loop:true,lazyLoad:true,margin:30,nav:false,dots:true,responsive:{0:{items:1},600:{items:3},1000:{items:5}}});};var causel3=function causel3(){$('.slider3').slick({vertical:true,dots:true,verticalSwiping:true,slidesToShow:2});;};causel2();causel1();causel3();causel4();var main=function main(){$('body').on('click','.tablist a',function(e){e.preventDefault();var link=$(this).attr('href');$('.tablist a').each(function(){$(this).removeClass('active');});$(this).addClass('active');$('.map .tab-content .tab-pane').each(function(){$(this).css('display','none');});$(link).css('display','block');});$('body').on('click','.header__buttons_activate',function(e){$('.header__select_hidden').slideToggle();});$('body').on('click','.header__select_hidden li',function(e){$('.header__select_hidden').slideToggle();});};main();function readURL(input){if(input.files&&input.files[0]){var count=input.files.length;for(var i=0;i<count;i++){var reader=new FileReader();var name=input.files[i].name;reader.onload=function(e){$('#selected-logo').append('<div class="add-logo"><div class="add-logo__preview" style="background-image: url('+e.target.result+');"></div><div class="add-logo__name">'+name+'</div><div class="add-logo__remove-btn"></div></div>');};reader.readAsDataURL(input.files[i]);}}}
$("#my_hidden_logo").change(function(){readURL(this);});$('#selected-logo').on('click','.add-logo__remove-btn',function(e){$(this).closest('.add-logo').remove();});var thisItem;function readURL2(input,thisInput){if(input.files&&input.files[0]){var count=input.files.length;for(var i=0;i<count;i++){var reader=new FileReader();var name=input.files[i].name;if(thisItem>0){var oldItem=thisInput.closest('.form-upload-files').find('.form-upload-files-list').find('.form-upload-file:nth-child('+thisItem+')');reader.onload=function(e){oldItem.find('.form-upload-file__name').html(name);oldItem.find('.form-upload-file__preview').attr('style','background-image: url('+e.target.result+')');};}else{reader.onload=function(e){thisInput.closest('.form-upload-files').find('.form-upload-files-list').append('<div class="form-upload-file"><label class="btn btn-default custom-upload-btn" for="my_hidden_file" id="file-input-label"><span>Выберите файл</span></label><div class="form-upload-file__name">'+name+'</div><div class="form-upload-file__preview" style="background-image: url('+e.target.result+');"></div><div class="form-upload-file__remove-btn"></div></div>');};}
reader.readAsDataURL(input.files[i]);thisItem=0;}}}
$(".my_hidden_file").on('change',function(){var thisInput=$(this);readURL2(this,thisInput);});$('.form-upload-files-list').on('click','.form-upload-file__remove-btn',function(e){$(this).closest('.form-upload-file').remove();});$('.form-upload-files-list').on('click','.custom-upload-btn',function(){thisItem=$(this).closest('.form-upload-file').index()+1;});var thisItem2;function readURL3(input,thisInput2){if(input.files&&input.files[0]){var count=input.files.length;for(var i=0;i<count;i++){var reader=new FileReader();var name=input.files[i].name;if(thisItem2>0){var oldItem=thisInput2.closest('.form-upload-files2').find('.form-upload-files-list2').find('.form-upload-file:nth-child('+thisItem2+')');reader.onload=function(e){oldItem.find('.form-upload-file__name').html(name);oldItem.find('.form-upload-file__preview').attr('style','background-image: url('+e.target.result+')');};}else{reader.onload=function(e){thisInput2.closest('.form-upload-files2').find('.form-upload-files-list2').append('<div class="form-upload-file"><label class="btn btn-default custom-upload-btn" for="my_hidden_file2" id="file-input-label2"><span>Выберите файл</span></label><div class="form-upload-file__name">'+name+'</div><div class="form-upload-file__preview" style="background-image: url('+e.target.result+');"></div><div class="form-upload-file__remove-btn"></div></div>');};}
reader.readAsDataURL(input.files[i]);thisItem2=0;}}}
$(".my_hidden_file2").on('change',function(){var thisInput2=$(this);readURL3(this,thisInput2);});$('.form-upload-files-list2').on('click','.form-upload-file__remove-btn',function(e){$(this).closest('.form-upload-file').remove();});$('.form-upload-files-list2').on('click','.custom-upload-btn',function(){thisItem2=$(this).closest('.form-upload-file').index()+1;});$('.field-group--week-wrapper').on('click','.field-group__drop-btn',function(){$(this).next().slideToggle();if($(this).hasClass('is-active')){$(this).removeClass('is-active');}else{$(this).addClass('is-active');}});$('.field-group--week-wrapper').on('change','.field-group__drop--week input',function(){var inputName=$(this).attr('name');var week='';$('input[name='+inputName+']').each(function(){var day=$(this).next('.label').html();if($(this).is(':checked')){week=week+'  '+day;}
$(this).closest('.field-group__drop--week').find('.field-group__area').html(week);if($('.field-group__area').is(':empty')){$('.field-group__area').html('Выбрать дни');}});week=' ';});$(".js-select").styler({selectSmartPositioning:false});$('[name=tags]').tagify();$('[name=tags2]').tagify();var mask={init:function init(){this.initPhone();this.initTime();},initPhone:function initPhone(){$("[type=tel]").inputmask({mask:'+7 (999) 999-99-99',"clearIncomplete":true,"showMaskOnHover":false});},initTime:function initTime(){$(".input-time").inputmask({mask:'99:99',"clearIncomplete":true,"showMaskOnHover":false});}};mask.init();var itemsList={init:function init(){this.addItem();this.removeItem();},addItem:function addItem(){$('.js-add-item').on('click',function(){var itemLink=$(this).closest('.add-item').find('.add-item__input').val();var itemName=$(this).closest('.add-item').find('li.selected').html();$(this).closest('.fields-block__body').find('.js-items-list').append('<div class="js-item"><div class="js-item__title">'+itemName+'</div><div class="js-item__link">'+itemLink+'</div><div class="js-item-remove"></div></div>');});},removeItem:function removeItem(){$('.js-items-list').on('click','.js-item-remove',function(){$(this).closest('.js-item').remove();});}};itemsList.init();$('.popup-youtube').magnificPopup({disableOn:700,type:'iframe',mainClass:'mfp-fade',removalDelay:160,preloader:false,fixedContentPos:false});function galleryInit(galleryName){galleryName.magnificPopup({delegate:'a',type:'image',tLoading:'Loading image #%curr%...',mainClass:'mfp-img-mobile',gallery:{enabled:true,navigateByImgClick:true,preload:[0,1],tCounter:'<span class="mfp-counter">%curr% из %total%</span>'},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function titleSrc(item){return item.el.attr('title');}}});}
var popupGallery=$('.popup-gallery'),popupGallery2=$('.popup-gallery-2');galleryInit(popupGallery);galleryInit(popupGallery2);var calendarEl=$('#calendar');var eventsFor=[{title:'11:00-13:00',start:'2019-08-04',color:'#fff'},{title:'15:00-17:00',start:'2019-08-04',color:'#fff'},{title:'15:00-17:00',start:'2019-08-04',color:'#fff'},{title:'15:00-17:00',start:'2019-08-04',color:'#fff'},{title:'',start:'2019-08-02',color:'#fff',discount:'-50%'},{title:'',start:'2019-08-06',color:'#fff',masterClass:'Мастер-класс',masterColor:'#9374EA'},{title:'',start:'2019-08-10',color:'#fff',masterClass:'Best Memories',masterColor:'#4378FF'},{title:'',start:'2019-08-15',color:'#fff',masterClass:'Артемий Лебедев',masterColor:'#FFA843'}];var calendar=new FullCalendar.Calendar(calendarEl,{locale:'ru',header:{left:'',center:'prev month title next',right:''},height:700,dayNamesShort:['Вc','Пн','Вт','Ср','Чт','Пт','Сб'],defaultDate:'2019-08-01',navLinks:false,eventStartEditable:false,eventDurationEditable:false,eventLimit:true,events:eventsFor,eventResize:function eventResize(event,dayDelta,minuteDelta,revertFunc){},eventAfterRender:function eventAfterRender(event,element,view){},eventRender:function eventRender(event,eventElement,element,view){var dataToFind=moment(event.start).format('YYYY-MM-DD');var height=$('.fc-bg').height()+$('.fc-day-top').height()+2;if(event.masterClass){$("td[data-date='"+dataToFind+"']").addClass('masterDay');$("td.fc-day-top[data-date='"+dataToFind+"']").addClass('masterDay').prepend("<div class='full-master' style='height: "+height+"px; border-color:"+event.masterColor+"''><span style='background-color: "+event.masterColor+"'>"+event.masterClass+"</span></div>");}
if(event.discount){$("td[data-date='"+dataToFind+"']").addClass('discountDay');$("td.fc-day-top[data-date='"+dataToFind+"']").addClass('discountDay').prepend("<div class='full-discount' style='height: "+height+"px; border-color:#F94E4E'><span>"+event.discount+"</span></div>");}
if(event.title!==''){$("td[data-date='"+dataToFind+"']").addClass('activeDay');}
var ntoday=new Date();var today=moment(ntoday).format('YYYY-MM-DD');$("td[data-date='"+today+"']").addClass('TodayDay');},eventClick:function eventClick(date,allDay,jsEvent,view){$('.popup-block').css('display','flex');date=moment(date).format('YYYY-MM-DD');moment.lang('ru');var textDate=moment(date).format('DD MMMM');$('.popup-block__date').html(textDate);},dayClick:function dayClick(date,allDay,jsEvent,view){$('.popup-block').css('display','flex');date=moment(date).format('YYYY-MM-DD');moment.lang('ru');var textDate=moment(date).format('DD MMMM');$('.popup-block__date').html(textDate);},dayRender:function dayRender(date,cell){}});calendar.render();$(document).on('click',function(e){var icon=$('#calendar');var element=$('.popup-block__inner');if(!icon.is(e.target)&&icon.has(e.target).length===0&&!element.is(e.target)&&element.has(e.target).length===0){$('.popup-block').css('display','none');}});var calendarSm=$('#small-calendar');var calendar2=new FullCalendar.Calendar(calendarSm,{locale:'ru',header:{left:'',center:'prev month title next',right:''}});calendar2.render();function navFixed(){var $target=$(".card-block__nav"),$toppoint=$(".card-block__nav").offset().top;$(window).scroll(function(){if(currentWidth>767){if($(window).scrollTop()>$toppoint){$target.addClass("is-fixed");}else{$target.removeClass("is-fixed");}}else{$target.removeClass("is-fixed");}});}
if($(".card-block__nav").length!==0){navFixed();}
function animateScroll(){$('.js-scroll').click(function(e){e.preventDefault();var id;id=$(this).attr('href');id=id.replace('#','');$('html, body').animate({scrollTop:$('.'+id).offset().top},1400,'swing');});}
animateScroll();$('.pavilion-preview-item__btn a').on('click',function(e){e.preventDefault();if($(this).hasClass('is-active')){$(this).removeClass('is-active').html('Развернуть');$(this).closest('.row').find('.pavilion-item').slideUp();}else{$(this).addClass('is-active').html('Свернуть');$('.pavilion-item').slideUp();$(this).closest('.row').find('.pavilion-item').slideDown();}
$('.pavilion-preview-item__btn a').not(this).removeClass('is-active').html('Развернуть');});MapYandex=function(){function func(){if($('#map13').length!=0){var $rentCoords=$('.js-card-address').data('card-coordinate');var newName=$('.js-card-address').data('name');var myMap13=new ymaps.Map('map13',{center:$rentCoords,zoom:14,controls:['zoomControl']});ymaps.geocode($rentCoords).then(function(res){var myPlacemark=new ymaps.Placemark($rentCoords,{balloonContentBody:newName},{preset:'islands#redDotIcon'});myMap13.geoObjects.add(myPlacemark);});};}
return{init:function init(){func();}};}();});